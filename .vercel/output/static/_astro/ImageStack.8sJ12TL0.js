import{M as z,j as f,u as I,P as S,l as H,e as L,L as N,k as U}from"./proxy.D5ohFzQK.js";import{r as n}from"./index.BL7xzsR_.js";class $ extends n.Component{getSnapshotBeforeUpdate(o){const t=this.props.childRef.current;if(t&&o.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function D({children:s,isPresent:o}){const t=n.useId(),e=n.useRef(null),i=n.useRef({width:0,height:0,top:0,left:0}),{nonce:d}=n.useContext(z);return n.useInsertionEffect(()=>{const{width:l,height:a,top:m,left:r}=i.current;if(o||!e.current||!l||!a)return;e.current.dataset.motionPopId=t;const u=document.createElement("style");return d&&(u.nonce=d),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${a}px !important;
            top: ${m}px !important;
            left: ${r}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[o]),f.jsx($,{isPresent:o,childRef:e,sizeRef:i,children:n.cloneElement(s,{ref:e})})}const O=({children:s,initial:o,isPresent:t,onExitComplete:e,custom:i,presenceAffectsLayout:d,mode:l})=>{const a=I(_),m=n.useId(),r=n.useCallback(p=>{a.set(p,!0);for(const C of a.values())if(!C)return;e&&e()},[a,e]),u=n.useMemo(()=>({id:m,initial:o,isPresent:t,custom:i,onExitComplete:r,register:p=>(a.set(p,!1),()=>a.delete(p))}),d?[Math.random(),r]:[t,r]);return n.useMemo(()=>{a.forEach((p,C)=>a.set(C,!1))},[t]),n.useEffect(()=>{!t&&!a.size&&e&&e()},[t]),l==="popLayout"&&(s=f.jsx(D,{isPresent:t,children:s})),f.jsx(S.Provider,{value:u,children:s})};function _(){return new Map}const w=s=>s.key||"";function b(s){const o=[];return n.Children.forEach(s,t=>{n.isValidElement(t)&&o.push(t)}),o}const K=({children:s,custom:o,initial:t=!0,onExitComplete:e,presenceAffectsLayout:i=!0,mode:d="sync",propagate:l=!1})=>{const[a,m]=H(l),r=n.useMemo(()=>b(s),[s]),u=l&&!a?[]:r.map(w),p=n.useRef(!0),C=n.useRef(r),y=I(()=>new Map),[P,k]=n.useState(r),[x,v]=n.useState(r);L(()=>{p.current=!1,C.current=r;for(let h=0;h<x.length;h++){const c=w(x[h]);u.includes(c)?y.delete(c):y.get(c)!==!0&&y.set(c,!1)}},[x,u.length,u.join("-")]);const E=[];if(r!==P){let h=[...r];for(let c=0;c<x.length;c++){const g=x[c],R=w(g);u.includes(R)||(h.splice(c,0,g),E.push(g))}d==="wait"&&E.length&&(h=E),v(b(h)),k(r);return}const{forceRender:j}=n.useContext(N);return f.jsx(f.Fragment,{children:x.map(h=>{const c=w(h),g=l&&!a?!1:r===x||u.includes(c),R=()=>{if(y.has(c))y.set(c,!0);else return;let M=!0;y.forEach(T=>{T||(M=!1)}),M&&(j?.(),v(C.current),l&&m?.(),e&&e())};return f.jsx(O,{isPresent:g,initial:!p.current||t?void 0:!1,custom:g?void 0:o,presenceAffectsLayout:i,mode:d,onExitComplete:g?void 0:R,children:h},c)})})},A=[{name:"HCMUTE",src:"/images/hcmute.png",alt:"This is my school HCMUTE"},{name:"CLOUD",src:"/images/cloudy.png",alt:"This scene is so beautiful and peaceful"},{name:"HO CHI MINH CITY",src:"/images/hcm_city.png",alt:"The city where I live"}],G=()=>{const[s,o]=n.useState(A),t=e=>{o(i=>{const d=[...i],[l]=d.splice(e,1);return d.push(l),d})};return f.jsx("div",{className:"relative w-full h-96 flex items-center justify-center",children:f.jsx(K,{children:s.map((e,i)=>f.jsxs(U.div,{className:"absolute w-full h-full rounded-xl shadow-lg overflow-hidden",style:{zIndex:s.length-i},initial:{scale:.9,y:i*10},animate:{scale:1,y:i*10,rotate:i*6},transition:{rotate:{duration:.5}},exit:{scale:.8,opacity:0,rotate:10},drag:"x",dragConstraints:{left:0,right:0},onDragEnd:(d,l)=>{(l.offset.x>100||l.offset.x<-100)&&t(i)},children:[f.jsx("img",{src:e.src,alt:e.alt,className:"w-full h-full object-cover",draggable:"false"}),f.jsx("div",{className:"absolute bottom-2 left-2 text-white text-sm p-2 rounded opacity-50",style:{background:"linear-gradient(45deg, #000, #333)",transform:"skewX(-10deg)",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.3)"},children:e.alt})]},e.name))})})};export{G as default};
